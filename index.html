<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Review Sentiment & Noun Analyzer</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .container { background: #f5f5f5; padding: 20px; border-radius: 10px; }
        button { padding: 10px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .review-box { background: white; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .result { padding: 10px; margin: 10px 0; background: #e9ecef; border-radius: 5px; }
        .noun-highlight { background-color: yellow; font-weight: bold; }
        .positive { color: #28a745; }
        .negative { color: #dc3545; }
        .neutral { color: #6c757d; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎯 Review Sentiment & Noun Analyzer</h1>
        
        <div class="controls">
            <button onclick="loadRandomReview()">📄 Load Random Review</button>
            <button onclick="analyzeSentiment()">😊 Analyze Sentiment</button>
            <button onclick="countNouns()">📊 Count Nouns</button>
        </div>

        <div class="review-box">
            <h3>Selected Review:</h3>
            <div id="reviewText">Click "Load Random Review" to start</div>
        </div>

        <div class="result">
            <h3>Analysis Results:</h3>
            <div id="sentimentResult">Sentiment will appear here</div>
            <div id="nounResult">Noun analysis will appear here</div>
        </div>

        <div style="margin-top: 20px; padding: 15px; background: #d1ecf1; border-radius: 5px;">
            <strong>💡 No API token needed!</strong> This version uses simple text analysis.
        </div>
    </div>

    <script>
        let currentReview = '';
        
        const testReviews = [
            "The product quality is excellent but the delivery service was terrible.",
            "I love lemon grass tea! I love this soup! Going to double my order.",
            "McVitie's digestive biscuits are great - not nearly as sweet as competitors.",
            "This is the best purchase I've made all year. Outstanding quality!",
            "Disappointed with the product. It broke after first use.",
            "Amazing value for money! Fast shipping and great customer service.",
            "Poor quality product. Would not recommend to anyone."
        ];

        const commonNouns = new Set([
            'product', 'quality', 'delivery', 'service', 'tea', 'soup', 'order',
            'biscuits', 'competitors', 'problem', 'packaging', 'purchase', 'year',
            'customer', 'support', 'item', 'price', 'shipping', 'box', 'package',
            'company', 'brand', 'taste', 'flavor', 'size', 'color', 'material',
            'money', 'value', 'recommendation'
        ]);

        function loadRandomReview() {
            const randomIndex = Math.floor(Math.random() * testReviews.length);
            currentReview = testReviews[randomIndex];
            document.getElementById('reviewText').textContent = currentReview;
            document.getElementById('sentimentResult').innerHTML = '😊 Sentiment will appear here';
            document.getElementById('nounResult').innerHTML = '📊 Noun analysis will appear here';
        }

        function analyzeSentiment() {
            if (!currentReview) {
                alert('Please load a review first');
                return;
            }

            const result = simpleSentimentAnalysis(currentReview);
            const resultEl = document.getElementById('sentimentResult');
            
            let emoji = '😐';
            if (result.label === 'POSITIVE') emoji = '😊';
            if (result.label === 'NEGATIVE') emoji = '😞';
            
            resultEl.innerHTML = 
                `${emoji} <strong>Sentiment:</strong> <span class="${result.label.toLowerCase()}">${result.label}</span> <br>
                 📈 <strong>Confidence:</strong> ${(result.confidence * 100).toFixed(1)}% <br>
                 🔍 <strong>Method:</strong> Keyword analysis <br>
                 <small>Positive words: ${result.positiveWords.join(', ') || 'none'}</small><br>
                 <small>Negative words: ${result.negativeWords.join(', ') || 'none'}</small>`;
        }

        function simpleSentimentAnalysis(text) {
            const positiveWords = ['love', 'excellent', 'great', 'best', 'outstanding', 'good', 'amazing', 'perfect', 'awesome', 'fantastic', 'recommend', 'fast', 'amazing'];
            const negativeWords = ['terrible', 'disappointed', 'broke', 'bad', 'worst', 'horrible', 'awful', 'broken', 'poor', 'problem'];
            
            const words = text.toLowerCase().split(/\s+/);
            let positiveMatches = [];
            let negativeMatches = [];
            
            words.forEach(word => {
                const cleanWord = word.replace(/[^a-z]/g, '');
                if (positiveWords.includes(cleanWord)) positiveMatches.push(cleanWord);
                if (negativeWords.includes(cleanWord)) negativeMatches.push(cleanWord);
            });
            
            const positiveScore = positiveMatches.length;
            const negativeScore = negativeMatches.length;
            const total = positiveScore + negativeScore;
            
            if (total === 0) {
                return { 
                    label: 'NEUTRAL', 
                    confidence: 0.5,
                    positiveWords: [],
                    negativeWords: []
                };
            }
            
            if (positiveScore > negativeScore) {
                return { 
                    label: 'POSITIVE', 
                    confidence: positiveScore / total,
                    positiveWords: [...new Set(positiveMatches)],
                    negativeWords: [...new Set(negativeMatches)]
                };
            } else if (negativeScore > positiveScore) {
                return { 
                    label: 'NEGATIVE', 
                    confidence: negativeScore / total,
                    positiveWords: [...new Set(positiveMatches)],
                    negativeWords: [...new Set(negativeMatches)]
                };
            } else {
                return { 
                    label: 'NEUTRAL', 
                    confidence: 0.5,
                    positiveWords: [...new Set(positiveMatches)],
                    negativeWords: [...new Set(negativeMatches)]
                };
            }
        }

        function countNouns() {
            if (!currentReview) {
                alert('Please load a review first');
                return;
            }

            const words = currentReview.toLowerCase()
                .replace(/[^a-z\s]/g, ' ')
                .split(/\s+/)
                .filter(word => word.length > 2);

            const foundNouns = words.filter(word => commonNouns.has(word));
            const uniqueNouns = [...new Set(foundNouns)];

            let highlightedText = currentReview;
            uniqueNouns.forEach(noun => {
                const regex = new RegExp(`\\b${noun}\\b`, 'gi');
                highlightedText = highlightedText.replace(regex, `<span class="noun-highlight">${noun}</span>`);
            });

            document.getElementById('reviewText').innerHTML = highlightedText;
            
            document.getElementById('nounResult').innerHTML = 
                `📊 <strong>Nouns Found:</strong> ${uniqueNouns.length} <br>
                 📝 <strong>Nouns List:</strong> ${uniqueNouns.join(', ') || 'none'} <br>
                 🎨 <small>Nouns are highlighted in yellow</small>`;
        }

        // Автозагрузка при старте
        window.onload = loadRandomReview;
    </script>
</body>
</html>
